<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Skyper&#x27;s blog - Qubes OS</title>
    <subtitle>Personal blog about IT, Electronics, InfoSec, Hacking, Bug Hunting...</subtitle>
    <link rel="self" type="application/atom+xml" href="https://blog.skyplabs.net/tags/qubes-os/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://blog.skyplabs.net"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2023-01-20T00:00:00+00:00</updated>
    <id>https://blog.skyplabs.net/tags/qubes-os/atom.xml</id>
    <entry xml:lang="en">
        <title>[Qubes OS] Make Docker use private storage</title>
        <published>2023-01-20T00:00:00+00:00</published>
        <updated>2023-01-20T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://blog.skyplabs.net/posts/qubes-os-docker-storage/"/>
        <id>https://blog.skyplabs.net/posts/qubes-os-docker-storage/</id>
        
        <content type="html" xml:base="https://blog.skyplabs.net/posts/qubes-os-docker-storage/">&lt;p&gt;The Docker engine stores all image layers in &lt;code&gt;&#x2F;var&#x2F;lib&#x2F;docker&lt;&#x2F;code&gt; by default, which
is not compatible with Qubes OS&#x27; template system. You would lose all your saved
images each time you restart the app qube in question.&lt;&#x2F;p&gt;
&lt;p&gt;You can change the Docker engine&#x27;s root data directory by editing
&lt;code&gt;&#x2F;etc&#x2F;docker&#x2F;daemon.json&lt;&#x2F;code&gt; in your template:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;json&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-json &quot;&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;data-root&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;docker&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The list of the directories that can be used to store Docker&#x27;s data persistently
across reboots can be found &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; title=&quot;Qubes OS - Inheritance and Persistence&quot; href=&quot;https:&#x2F;&#x2F;www.qubes-os.org&#x2F;doc&#x2F;templates&#x2F;#inheritance-and-persistence&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Once the configuration file in place in your template, you can then boot up any
app qube using this template and check if the new location has correctly been
taken into account:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;raw&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-raw &quot;&gt;&lt;code class=&quot;language-raw&quot; data-lang=&quot;raw&quot;&gt;&lt;span&gt;$ sudo docker info | grep -i &amp;#39;root dir&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt; Docker Root Dir: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;docker
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Please note that if you already had Docker images stored in an qube app before
making this configuration change, they won&#x27;t be available in Docker any more.
You would need to move them to the new location or download them again.&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
